substitutions:
  my_name: "Square Screen Livingroom"
  # Screen Size
  screen_height: '480px'
  screen_width: '480px'
#  subst_taklampe: light.taklampe_1_stue
#  subst_stalampe: light.readinglight_1_stue
  subst_taklampe: light.taklampe_1_stue
  subst_stalampe: light.readinglight_1_stue

packages:
  fonts: !include modules/common/fonts.yaml
  wifi: !include modules/common/wifi.yaml
  image: !include modules/common/images.yaml
  core: !include modules/common/core.yaml
  colors: !include modules/common/color.yaml
  hardware: !include modules/hardware/guition-4-480x480-square.yaml
  top_layer: !include modules/lvgl/top_layer_square_screen.yaml
  sensors_base: !include modules/sensors/sensors_base_square.yaml
  theme: !include modules/lvgl/theme.yaml
  style_definitions: !include modules/lvgl/style_definitions_common.yaml
#  bluetooth: !include modules/common/bluetooth_tracker.yaml

esphome:
  name: esp-screen-livingroom
  friendly_name: ${my_name}
  on_boot:
    - lvgl.widget.hide: top_layer_btn_matrix
    - delay: 15s
    - lvgl.widget.hide: boot_screen
    - lvgl.widget.show: top_layer_btn_matrix

script:
  - id: time_update
    then:
      - lambda: |-
          // No operation
api:
  on_client_connected:
    - if:
        condition:
          lambda: 'return (0 == client_info.find("Home Assistant "));'
        then:
          - lvgl.widget.show: lbl_hastatus
          - lvgl.widget.show: lbl_hastatus_wth
          - lvgl.widget.show: lbl_hastatus_pwr
          - lvgl.widget.show: lbl_hastatus_tnd
          - lvgl.widget.show: lbl_hastatus_bus
          - lvgl.widget.show: lbl_hastatus_inf
  on_client_disconnected:
    - if:
        condition:
          lambda: 'return (0 == client_info.find("Home Assistant "));'
        then:
          - lvgl.widget.hide: lbl_hastatus
          - lvgl.widget.hide: lbl_hastatus_wth
          - lvgl.widget.hide: lbl_hastatus_pwr
          - lvgl.widget.hide: lbl_hastatus_tnd
          - lvgl.widget.hide: lbl_hastatus_bus
          - lvgl.widget.hide: lbl_hastatus_inf

sensor:
  - platform: homeassistant
    id: sensor_pris_akkurat_na
    entity_id: !secret estimated_total_price_with_subsidy_and_grid_price_address
    on_value:
      - lvgl.label.update:
          id: power_lbl_pris_akkurat_na
          text:
            format: "%.2f kr"
            args: [ 'x' ]
  - platform: homeassistant
    id: sensor_pris_denne_maned
    entity_id: !secret monthly_cost_with_subsidy_address
    on_value:
      - lvgl.label.update:
          id: power_lbl_pris_denne_maned
          text:
            format: "%.0f kr"
            args: [ 'x' ]
  - platform: homeassistant
    id: sensor_pris_hittil_i_dag
    entity_id: !secret daily_cost_with_subsidy_address
    on_value:
      - lvgl.label.update:
          id: power_lbl_pris_hittil_i_dag
          text:
            format: "%.2f kr"
            args: [ 'x' ]
  - platform: homeassistant
    id: sensor_forbruk_hittil_i_dag
    entity_id: !secret accumulated_consumption_address
    on_value:
      - lvgl.label.update:
          id: power_lbl_forbruk_hittil_i_dag
          text:
            format: "%.0f kWh"
            args: [ 'x' ]
  - platform: homeassistant
    id: sensor_forbruk_hittil_denne_maned
    entity_id: sensor.monthly_net_consumption_krokliveien
    on_value:
      - lvgl.label.update:
          id: power_lbl_forbruk_denne_maned
          text:
            format: "%.0f kWh"
            args: [ 'x' ]
  - platform: homeassistant
    id: sensor_forbruk_akkurat_na
    entity_id: !secret real_time_consumption_address
    on_value:
      - lvgl.indicator.update:
          id: power_meter_input
          value: !lambda return round(x/1000); 
      - lvgl.label.update:
          id: power_lbl_forbruk_akkurat_na
          text: !lambda |-
            char buf[4];
            sprintf(buf, "%0.1f", x/1000);
            return to_string(((std::string)buf).c_str()) + " kW";
  - platform: homeassistant
    id: light_brightness_taklampe
    entity_id: ${subst_taklampe}
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: dimmer_slider_taklampe
          value: !lambda |-
            if (isnan(id(light_brightness_taklampe).state)) {
              return 0;
            }
            return x;
  - platform: homeassistant
    id: light_brightness_stalampe
    entity_id: ${subst_stalampe}
    attribute: brightness
    on_value:
      - lvgl.slider.update:
          id: dimmer_slider_stalampe
          value: !lambda |-
            if (isnan(id(light_brightness_stalampe).state)) {
              return 0;
            }
            return x;
  - platform: homeassistant
    id: sensor_comfort_temp_stue
    name: "Comfort Livingroom From Home Assistant"
    entity_id: input_number.temperatur_1_stue_komfort
    on_value:
      - lvgl.spinbox.update:
          id: spinbox_temp_id
          value: !lambda return x;
  - platform: homeassistant
    id: temperature_1_stue_average
    name: "Average Temperature Sensor Livingroom From Home Assistant"
    entity_id: sensor.temperature_1_stue_average
    on_value:
      - lvgl.label.update:
          id: lbl_temperature_inne_text
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: temperatur_ute_text
    entity_id: sensor.temperatur_ute
    on_value:
      - lvgl.label.update:
          id: lbl_temperature_ute_text
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: vind_ute_text
    entity_id: sensor.bjerkedalen_wind_strength
    on_value:
      - lvgl.label.update:
          id: lbl_vind_ute_text
          text:
            format: " %.1f m/s"
            args: [ 'x' ]
  - platform: homeassistant
    id: trykk_ute_text
    entity_id: sensor.bjerkedalen_pressure
    on_value:
      - lvgl.label.update:
          id: lbl_trykk_ute_text
          text:
            format: " %.0f mbar"
            args: [ 'x' ]
  - platform: homeassistant
    id: fukt_ute_text
    entity_id: sensor.bjerkedalen_humidity
    on_value:
      - lvgl.label.update:
          id: lbl_fukt_ute_text
          text:
            format: " %.0f %%"
            args: [ 'x' ]
# Været i morgen
  - platform: homeassistant
    id: wth_sensor_tempmax
    entity_id: sensor.temperature_forecast_next_day
    on_value:
      - lvgl.label.update:
          id: wth_lbl_temperature_high_text
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_tempmin
    entity_id: sensor.low_temperature_forecast_next_day
    on_value:
      - lvgl.label.update:
          id: wth_lbl_temperature_low_text
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_wind
    entity_id: sensor.wind_forecast_next_day
    on_value:
      - lvgl.label.update:
          id: wth_lbl_vind_ute_text
          text:
            format: " %.1f m/s"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_precip
    entity_id: sensor.precipitation_forecast_next_day
    on_value:
      - lvgl.label.update:
          id: wth_lbl_fukt_ute_text
          text:
            format: " %.0f %%"
            args: [ 'x' ]
# Været dagen etter i morgen
  - platform: homeassistant
    id: wth_sensor_tempmax_1
    entity_id: sensor.temperature_forecast_next_day_1
    on_value:
      - lvgl.label.update:
          id: wth_lbl_temperature_high_text_1
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_tempmin_1
    entity_id: sensor.low_temperature_forecast_next_day_1
    on_value:
      - lvgl.label.update:
          id: wth_lbl_temperature_low_text_1
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_wind_1
    entity_id: sensor.wind_forecast_next_day_1
    on_value:
      - lvgl.label.update:
          id: wth_lbl_vind_ute_text_1
          text:
            format: " %.1f m/s"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_precip_1
    entity_id: sensor.precipitation_forecast_next_day_1
    on_value:
      - lvgl.label.update:
          id: wth_lbl_fukt_ute_text_1
          text:
            format: " %.0f %%"
            args: [ 'x' ]
# Været i morgen
  - platform: homeassistant
    id: wth_sensor_tempmax_2
    entity_id: sensor.temperature_forecast_next_day_2
    on_value:
      - lvgl.label.update:
          id: wth_lbl_temperature_high_text_2
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_tempmin_2
    entity_id: sensor.low_temperature_forecast_next_day_2
    on_value:
      - lvgl.label.update:
          id: wth_lbl_temperature_low_text_2
          text:
            format: " %.1f °C"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_wind_2
    entity_id: sensor.wind_forecast_next_day_2
    on_value:
      - lvgl.label.update:
          id: wth_lbl_vind_ute_text_2
          text:
            format: " %.1f m/s"
            args: [ 'x' ]
  - platform: homeassistant
    id: wth_sensor_precip_2
    entity_id: sensor.precipitation_forecast_next_day_2
    on_value:
      - lvgl.label.update:
          id: wth_lbl_fukt_ute_text_2
          text:
            format: " %.0f %%"
            args: [ 'x' ]

text_sensor:
# Setter string til icon definert i fonts.yaml utfra openweathermap
  - platform: homeassistant
    id: event_hellarvik_1
    entity_id: sensor.event_hellarvik_1
    on_value:
      - lvgl.label.update:
          id: lbl_event_hellarvik_1
          text: !lambda return x;
  - platform: homeassistant
    id: event_hellarvik_2
    entity_id: sensor.event_hellarvik_2
    on_value:
      - lvgl.label.update:
          id: lbl_event_hellarvik_2
          text: !lambda return x;
  - platform: homeassistant
    id: event_hellarvik_3
    entity_id: sensor.event_hellarvik_3
    on_value:
      - lvgl.label.update:
          id: lbl_event_hellarvik_3
          text: !lambda return x;
  - platform: homeassistant
    id: event_middag_1
    entity_id: sensor.event_middag_1
    on_value:
      - lvgl.label.update:
          id: lbl_event_middag_1
          text: !lambda return x;
  - platform: homeassistant
    id: event_middag_2
    entity_id: sensor.event_middag_2
    on_value:
      - lvgl.label.update:
          id: lbl_event_middag_2
          text: !lambda return x;
  - platform: homeassistant
    id: event_middag_3
    entity_id: sensor.event_middag_3
    on_value:
      - lvgl.label.update:
          id: lbl_event_middag_3
          text: !lambda return x;
  - platform: homeassistant
    id: sensor_weather_icon
    entity_id: sensor.openweathermap_condition
    on_value:
      - lvgl.label.update:
          id: lbl_weather_condition_icon
          text: !lambda |-
            static char buf[10];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "\U000F0594";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "\U000F0590";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "\U000F0F2F";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "\U000F0591";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "\U000F0592";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "\U000F0593";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "\U000F067E";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "\U000F0595";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "\U000F0596";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "\U000F0597";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "\U000F0598";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "\U000F067F";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "\U000F0599";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "\U000F059D";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "\U000F059E";
            } else {
              icon = "\U000F14E4";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
      - lvgl.label.update:
          id: lbl_weather_condition_name
          text: !lambda |-
            static char buf[15];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "Klar natt";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "Overskyet";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "Supert";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "Tåke";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "Hagl";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "Tordenvær";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "Regn og\ntorden";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "Delvis\nskyet";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "Mye regn";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "Regn";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "Snø";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "Sklett";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "Sol";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "Vindfullt";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "Ruskevær";
            } else {
              icon = "Ukjent";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
# Været i morgen
  - platform: homeassistant
    id: wth_sensor_weather_icon
    entity_id: sensor.condition_forecast_next_day
    on_value:
      - lvgl.label.update:
          id: wth_lbl_weather_condition_icon
          text: !lambda |-
            static char buf[10];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "\U000F0594";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "\U000F0590";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "\U000F0F2F";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "\U000F0591";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "\U000F0592";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "\U000F0593";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "\U000F067E";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "\U000F0595";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "\U000F0596";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "\U000F0597";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "\U000F0598";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "\U000F067F";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "\U000F0599";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "\U000F059D";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "\U000F059E";
            } else {
              icon = "\U000F14E4";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
      - lvgl.label.update:
          id: wth_lbl_weather_condition_name
          text: !lambda |-
            static char buf[15];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "Klar natt";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "Overskyet";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "Supert";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "Tåke";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "Hagl";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "Tordenvær";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "Regn og\ntorden";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "Delvis\nskyet";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "Mye regn";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "Regn";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "Snø";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "Sklett";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "Sol";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "Vindfullt";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "Ruskevær";
            } else {
              icon = "Ukjent";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
# Været dagen etter i morgen
  - platform: homeassistant
    id: wth_sensor_weather_icon_1
    entity_id: sensor.condition_forecast_next_day_1
    on_value:
      - lvgl.label.update:
          id: wth_lbl_weather_condition_icon_1
          text: !lambda |-
            static char buf[10];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "\U000F0594";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "\U000F0590";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "\U000F0F2F";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "\U000F0591";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "\U000F0592";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "\U000F0593";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "\U000F067E";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "\U000F0595";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "\U000F0596";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "\U000F0597";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "\U000F0598";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "\U000F067F";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "\U000F0599";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "\U000F059D";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "\U000F059E";
            } else {
              icon = "\U000F14E4";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
      - lvgl.label.update:
          id: wth_lbl_weather_condition_name_1
          text: !lambda |-
            static char buf[15];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "Klar natt";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "Overskyet";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "Supert";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "Tåke";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "Hagl";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "Tordenvær";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "Regn og\ntorden";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "Delvis\nskyet";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "Mye regn";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "Regn";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "Snø";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "Sklett";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "Sol";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "Vindfullt";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "Ruskevær";
            } else {
              icon = "Ukjent";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
# Været dagen etter dagen etter i morgen
  - platform: homeassistant
    id: wth_sensor_weather_icon_2
    entity_id: sensor.condition_forecast_next_day_2
    on_value:
      - lvgl.label.update:
          id: wth_lbl_weather_condition_icon_2
          text: !lambda |-
            static char buf[10];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "\U000F0594";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "\U000F0590";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "\U000F0F2F";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "\U000F0591";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "\U000F0592";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "\U000F0593";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "\U000F067E";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "\U000F0595";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "\U000F0596";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "\U000F0597";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "\U000F0598";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "\U000F067F";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "\U000F0599";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "\U000F059D";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "\U000F059E";
            } else {
              icon = "\U000F14E4";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;
      - lvgl.label.update:
          id: wth_lbl_weather_condition_name_2
          text: !lambda |-
            static char buf[15];
            std::string icon;
            if (0 == x.compare(std::string{"clear-night"})) {
                icon = "Klar natt";
            } else if (0 == x.compare(std::string{"cloudy"})) {
                icon = "Overskyet";
            } else if (0 == x.compare(std::string{"exceptional"})) {
                icon = "Supert";
            } else if (0 == x.compare(std::string{"fog"})) {
                icon = "Tåke";
            } else if (0 == x.compare(std::string{"hail"})) {
                icon = "Hagl";
            } else if (0 == x.compare(std::string{"lightning"})) {
                icon = "Tordenvær";
            } else if (0 == x.compare(std::string{"lightning-rainy"})) {
                icon = "Regn og\ntorden";
            } else if (0 == x.compare(std::string{"partlycloudy"})) {
                icon = "Delvis\nskyet";
            } else if (0 == x.compare(std::string{"pouring"})) {
                icon = "Mye regn";
            } else if (0 == x.compare(std::string{"rainy"})) {
                icon = "Regn";
            } else if (0 == x.compare(std::string{"snowy"})) {
                icon = "Snø";
            } else if (0 == x.compare(std::string{"snowy-rainy"})) {
                icon = "Sklett";
            } else if (0 == x.compare(std::string{"sunny"})) {
                icon = "Sol";
            } else if (0 == x.compare(std::string{"windy"})) {
                icon = "Vindfullt";
            } else if (0 == x.compare(std::string{"windy-variant"})) {
                icon = "Ruskevær";
            } else {
              icon = "Ukjent";
            }
            snprintf(buf, sizeof(buf), "%s", icon.c_str());
            return buf;

# "Lysbrytere" i stua
  - platform: homeassistant
    id: ts_taklampe_stua
    entity_id: ${subst_taklampe}
    on_value:
      - if:
          condition:
            text_sensor.state: 
              id: ts_taklampe_stua
              state: "on"
          then:
            - delay: 500ms
            - lvgl.widget.update:
                id: ceiling_light_symbol
                state:
                  checked: true
          else:
            - delay: 500ms
            - lvgl.widget.update:
                id: ceiling_light_symbol
                state:
                  checked: false
  - platform: homeassistant
    id: ts_stalampe_stua
    entity_id: ${subst_stalampe}
    on_value:
      - if:
          condition:
            text_sensor.state: 
              id: ts_stalampe_stua
              state: "on"
          then:
            - delay: 500ms
            - lvgl.widget.update:
                id: reading_light_symbol
                state:
                  checked: true
          else:
            - delay: 500ms
            - lvgl.widget.update:
                id: reading_light_symbol
                state:
                  checked: false
# 58 Nydalen
  - platform: homeassistant
    id: ha_entur_businfo_58_nydalen
    entity_id: sensor.58_bjerkedalen_park_platform_10993
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_58_nydalen_first
            text:
              format: "%s min"
              args: [ 'x.c_str()' ]
  - platform: homeassistant
    id: ha_entur_businfo_58_nydalen_next
    entity_id: sensor.next_58_nydalen
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_58_nydalen_next
            text: !lambda return x;
# 60 Sentrum
  - platform: homeassistant
    id: ha_entur_businfo_60
    entity_id: sensor.60_okernbraten_platform_10901
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_60_vippetangen_first
            text:
              format: "%s min"
              args: [ 'x.c_str()' ]
  - platform: homeassistant
    id: ha_entur_businfo_60_next
    entity_id: sensor.next_60_sentrum
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_60_vippetangen_next
            text: !lambda return x;
# 58 Tveita
  - platform: homeassistant
    id: ha_entur_businfo_58_tveita
    entity_id: sensor.58_bjerkedalen_park_platform_10996
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_58_tveita_first
            text:
              format: "%s min"
              args: [ 'x.c_str()' ]
  - platform: homeassistant
    id: ha_entur_businfo_58_tveita_next
    entity_id: sensor.next_58_tveita
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_58_tveita_next
            text: !lambda return x;
# 60 Sentrum
  - platform: homeassistant
    id: ha_entur_businfo_60_tonsenhagen
    entity_id: sensor.60_okernbraten_platform_10902
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_60_tonsenhagen_first
            text:
              format: "%s min"
              args: [ 'x.c_str()' ]
  - platform: homeassistant
    id: ha_entur_businfo_60_tonsenhagen_next
    entity_id: sensor.next_60_tonsenhagen
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_60_tonsenhagen_next
            text: !lambda return x;
# Hvor mange dager er det til Papirsøpla tømmes
  - platform: homeassistant
    id: sensor_paperwaste_relative_next
    entity_id: sensor.paperwaste_next
    filters:
      - to_lower:
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_info_paper_waste
            text: !lambda return "Papirsøppel " + x;
# Hvor mange dager er det til Restsøpla tømmes
  - platform: homeassistant
    id: sensor_restwaste_relative_next
    entity_id: sensor.restwaste_next
    filters:
      - to_lower:
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_info_rest_waste
            text: !lambda return "Restsøppel " + x;
# Hvor mange dager er det til Posten kommer
  - platform: homeassistant
    id: sensor_mail_relative_next
    entity_id: sensor.posten_sensor_next_relative
    filters:
      - to_lower:
    on_value:
      then:
        - lvgl.label.update:
            id: lbl_info_mail
            text: !lambda return "Posten kommer " + x;

lvgl:
#full_refresh: true # redraw whole display every time so very slow
  disp_bg_image: bg_image
  displays:
    - my_display
  touchscreens:
    - my_touchscreen
  on_idle:
    timeout: 240s  # Turn off back light if idle for 10 secs
    then:
      - logger.log: "LVGL is idle"
      - light.turn_off: 
          id: backlight
          transition_length: 5s          
      - lvgl.pause:
          show_snow: true # Prevent burn-in  disp_bg_color: black
  pages:
    - id: main_page
      # on_swipe_left:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped left"
      #   - lvgl.page.next:
      # on_swipe_right:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped right"
      #   - lvgl.page.previous:
      bg_color: black
      bg_opa: TRANSP
      widgets:
        - obj:
            align: CENTER
            width: 470
            height: 470
            pad_all: 2
            bg_opa: TRANSP
            bg_color: black
            border_opa: COVER
            border_color: white
            border_width: 0
            layout:
              pad_column: 0
              pad_row: 0
              type: GRID
              grid_rows: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
              grid_columns: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
            widgets:
              - obj:
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: header_footer
                  widgets:
                    - label:
                        text_font: roboto_20
                        text: "Hovedside"
                        align: CENTER
                        text_align: CENTER
                        text_color: 0xFFFFFF
              - label:
                  text: "\uF1EB"
                  id: lbl_hastatus
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  hidden: true
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
              - button:
                  id: ceiling_light_symbol
                  widgets:
                    - label:
                        text_font: mdi_62
                        align: center
                        text: "\U000F0769"
                  checkable: true
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 2
                  grid_cell_column_span: 6
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  on_press:
                    then:
                      - homeassistant.action:
                          action: light.toggle
                          data:
                            entity_id: ${subst_taklampe}
                      - delay: 2ms
                      - homeassistant.action:
                          action: input_button.press
                          data:
                            entity_id: input_button.lagre_lys
              - slider:
                  id: dimmer_slider_taklampe
                  align: CENTER
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 6
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  width: 220
                  height: 20
                  min_value: 0
                  max_value: 255
                  on_release:
                    - homeassistant.action:
                        action: light.turn_on
                        data:
                          entity_id: ${subst_taklampe}
                          brightness: !lambda return int(x);


              - button:
                  id: reading_light_symbol
                  widgets:
                    - label:
                        text_font: mdi_62
                        align: center
                        text: "\U000F08DD"
                  checkable: true
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 2
                  grid_cell_column_span: 6
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  on_press:
                    then:
                      - homeassistant.action:
                          action: light.toggle
                          data:
                            entity_id: ${subst_stalampe}
                      - delay: 2ms
                      - homeassistant.action:
                          action: input_button.press
                          data:
                            entity_id: input_button.lagre_lys
              - slider:
                  id: dimmer_slider_stalampe
                  align: CENTER
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 6
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  width: 220
                  height: 20
                  min_value: 0
                  max_value: 255
                  on_release:
                    - homeassistant.action:
                        action: light.turn_on
                        data:
                          entity_id: ${subst_stalampe}
                          brightness: !lambda return int(x);

              - label:
                  text: "\U000F14E4"
                  id: lbl_weather_condition_icon
                  text_font: icons_100
                  text_color: white
                  text_align: CENTER
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "Unknown"
                  id: lbl_weather_condition_name
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F0F55"
                  text_align: CENTER
                  text_font: mdi_42
                  text_color: red
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 6
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: lbl_temperature_inne_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F0F54"
                  text_align: CENTER
                  text_color: blue
                  text_font: mdi_42
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 6
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: lbl_temperature_ute_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F15FA"
                  text_align: CENTER
                  text_color: green
                  text_font: mdi_42
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 6
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- m/s"
                  id: lbl_vind_ute_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F029A"
                  text_align: CENTER
                  text_color: purple
                  text_font: mdi_42
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 6
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "---- mbar"
                  id: lbl_trykk_ute_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F058E"
                  text_align: CENTER
                  text_color: cyan
                  text_font: mdi_42
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 6
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "---- %%"
                  id: lbl_fukt_ute_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - button:
                  id: spin_up_temp
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  checkable: false
                  on_click:
                    - lvgl.spinbox.increment: spinbox_temp_id
                  widgets:
                    - label:
                          text_font: mdi_62
                          text: "\U000F11EC"
              - spinbox:
                  id: spinbox_temp_id
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  align: CENTER
                  text_align: CENTER
                  width: 80
                  height: 80
                  range_from: 15
                  range_to: 25
                  step: 1
                  anim_time: 1s
                  rollover: false
                  digits: 2
                  decimal_places: 0
                  text_font: roboto_46
                  on_value:
                      - homeassistant.action:
                          action: input_number.set_value
                          data:
                              entity_id: input_number.temperatur_1_stue_komfort
                              value: !lambda return x;
              - button:
                  id: spin_down_temp
                  checkable: false
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  on_click:
                    - lvgl.spinbox.decrement: spinbox_temp_id
                  widgets:
                    - label:
                          text_font: mdi_62
                          text: "\U000F1639"
    - id: weather_page
      # on_swipe_left:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped left"
      #   - lvgl.page.next:
      # on_swipe_right:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped right"
      #   - lvgl.page.previous:
      bg_color: black
      bg_opa: TRANSP
      widgets:
        - obj:
            align: CENTER
            width: 470
            height: 470
            pad_all: 2
            bg_color: black
            bg_opa: TRANSP
            border_opa: COVER
            border_color: white
            border_width: 0
            layout:
              pad_column: 0
              pad_row: 0
              type: GRID
              grid_rows: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
              grid_columns: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
            widgets:
              - obj:
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: header_footer
                  widgets:
                    - label:
                        text_font: roboto_20
                        text: "Vær neste 3 dager"
                        align: CENTER
                        text_align: CENTER
                        text_color: 0xFFFFFF
              - label:
                  text: "\uF1EB"
                  id: lbl_hastatus_wth
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  hidden: true
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
# Været i morgen
              - label:
                  text: "\U000F14E4"
                  id: wth_lbl_weather_condition_icon
                  text_font: icons_100
                  text_color: white
                  text_align: CENTER
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "Unknown"
                  id: wth_lbl_weather_condition_name
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F10C2"
                  text_align: CENTER
                  text_font: mdi_42
                  text_color: red
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: wth_lbl_temperature_high_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F10C3"
                  text_align: CENTER
                  text_color: blue
                  text_font: mdi_42
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: wth_lbl_temperature_low_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F15FA"
                  text_align: CENTER
                  text_color: green
                  text_font: mdi_42
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- m/s"
                  id: wth_lbl_vind_ute_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F058E"
                  text_align: CENTER
                  text_color: cyan
                  text_font: mdi_42
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "---- %%"
                  id: wth_lbl_fukt_ute_text
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
# Været dagen etter i morgen
              - label:
                  text: "\U000F14E4"
                  id: wth_lbl_weather_condition_icon_1
                  text_font: icons_100
                  text_color: white
                  text_align: CENTER
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "Unknown"
                  id: wth_lbl_weather_condition_name_1
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F10C2"
                  text_align: CENTER
                  text_font: mdi_42
                  text_color: red
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: wth_lbl_temperature_high_text_1
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F10C3"
                  text_align: CENTER
                  text_color: blue
                  text_font: mdi_42
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: wth_lbl_temperature_low_text_1
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F15FA"
                  text_align: CENTER
                  text_color: green
                  text_font: mdi_42
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- m/s"
                  id: wth_lbl_vind_ute_text_1
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F058E"
                  text_align: CENTER
                  text_color: cyan
                  text_font: mdi_42
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 4
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "---- %%"
                  id: wth_lbl_fukt_ute_text_1
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
# Været 2 dager etter i morgen
              - label:
                  text: "\U000F14E4"
                  id: wth_lbl_weather_condition_icon_2
                  text_font: icons_100
                  text_color: white
                  text_align: CENTER
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "Unknown"
                  id: wth_lbl_weather_condition_name_2
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_24
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F10C2"
                  text_align: CENTER
                  text_font: mdi_42
                  text_color: red
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: wth_lbl_temperature_high_text_2
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F10C3"
                  text_align: CENTER
                  text_color: blue
                  text_font: mdi_42
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- °C"
                  id: wth_lbl_temperature_low_text_2
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F15FA"
                  text_align: CENTER
                  text_color: green
                  text_font: mdi_42
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "--.- m/s"
                  id: wth_lbl_vind_ute_text_2
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER

              - label:
                  text: "\U000F058E"
                  text_align: CENTER
                  text_color: cyan
                  text_font: mdi_42
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER

              - label:
                  text: "---- %%"
                  id: wth_lbl_fukt_ute_text_2
                  text_align: CENTER
                  text_color: white
                  text_font: roboto_20
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
    - id: power_page
      # on_swipe_left:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped left"
      #   - lvgl.page.next:
      # on_swipe_right:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped right"
      #   - lvgl.page.previous:
      bg_color: black
      bg_opa: TRANSP
      widgets:
        - obj:
            align: CENTER
            width: 470
            height: 470
            pad_all: 2
            bg_color: black
            bg_opa: TRANSP
            border_opa: COVER
            border_color: white
            border_width: 0
            layout:
              pad_column: 0
              pad_row: 0
              type: GRID
              grid_rows: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
              grid_columns: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
            widgets:
              - obj:
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: header_footer
                  widgets:
                    - label:
                        text_font: roboto_20
                        text: "Info om strøm"
                        align: CENTER
                        text_align: CENTER
                        text_color: 0xFFFFFF
              - label:
                  text: "\uF1EB"
                  id: lbl_hastatus_pwr
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  hidden: true
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
              - obj: # Meter
                  width: 400
                  height: 400
                  bg_opa: TRANSP
                  bg_color: 0
                  border_width: 0
                  outline_width: 0
                  shadow_width: 0
                  pad_all: 0
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 10
                  grid_cell_column_span: 10
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  widgets:
                    - meter: # Gradient color  arc
                        height: 380
                        width: 380
                        border_width: 0
                        outline_width: 0
                        align: center
                        bg_color: 0
                        bg_opa: TRANSP
                        scales:
                          angle_range: 180 # sets the total angle to 180 = starts mid left and ends mid right
                          range_to: 9
                          range_from: 0
                          ticks:
                            count: 0 
                          indicators:
                            - line:
                                id: power_meter_input
                                width: 8
                                color: 0xFFFFFF
                                r_mod: 12 #sets line length by this much difference from the scale default radius
                                value: 5
                            - arc:
                                color: 0x00FF00
                                r_mod: 10 #radius difference from the scale default radius
                                width: 25
                                start_value: 0
                                end_value: 3
                            - arc:
                                color: 0xFFFF00 
                                r_mod: 10 #radius difference from the scale default radius
                                width: 25
                                start_value: 3
                                end_value: 6
                            - arc:
                                color: 0xFF3000
                                r_mod: 10 #radius difference from the scale default radius
                                width: 25
                                start_value: 6
                                end_value: 9
              - label:
                  text: "0   "
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: START
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
              - label:
                  text: "10  "
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: START
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_font: roboto_30
                  text: "Dag"
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_color: green
                  text_font: mdi_30
                  text: "\U000F0114"
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_font: roboto_18
                  id: power_lbl_pris_hittil_i_dag
              - label:
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_color: yellow
                  text_font: mdi_30
                  text: "\U000F0241"
              - label:
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_font: roboto_18
                  id: power_lbl_forbruk_hittil_i_dag
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_font: roboto_30
                  text: "Nå"
              - obj:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 3
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  height: 110
                  width: 150
                  pad_all: 0
                  bg_opa: TRANSP
                  border_opa: TRANSP
                  border_width: 0
                  layout:
                    pad_column: 0
                    pad_row: 0
                    type: GRID
                    grid_rows: [70, 40]
                    grid_columns: [55, 95]
                  widgets:
                    - label:
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 0
                        grid_cell_row_span: 1
                        grid_cell_column_span: 1
                        grid_cell_x_align: END
                        grid_cell_y_align: END
                        bg_opa: TRANSP
                        styles: font_style
                        text_color: green
                        text_font: mdi_30
                        text: "\U000F0114"
                    - label:
                        grid_cell_row_pos: 0
                        grid_cell_column_pos: 1
                        grid_cell_row_span: 1
                        grid_cell_column_span: 1
                        grid_cell_x_align: START
                        grid_cell_y_align: END
                        bg_opa: TRANSP
                        styles: font_style
                        id: power_lbl_pris_akkurat_na
                    - label:
                        grid_cell_row_pos: 1
                        grid_cell_column_pos: 0
                        grid_cell_row_span: 1
                        grid_cell_column_span: 1
                        grid_cell_x_align: END
                        grid_cell_y_align: END
                        bg_opa: TRANSP
                        styles: font_style
                        text_color: yellow
                        text_font: mdi_30
                        text: "\U000F0241"
                    - label:
                        grid_cell_row_pos: 1
                        grid_cell_column_pos: 1
                        grid_cell_row_span: 1
                        grid_cell_column_span: 1
                        grid_cell_x_align: START
                        grid_cell_y_align: END
                        bg_opa: TRANSP
                        styles: font_style
                        id: power_lbl_forbruk_akkurat_na
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 3
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_font: roboto_30
                  text: "Måned"
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_color: green
                  text_font: mdi_30
                  text: "\U000F0114"
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  text_font: roboto_18
                  bg_opa: TRANSP
                  styles: font_style
                  id: power_lbl_pris_denne_maned
              - label:
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  styles: font_style
                  text_color: yellow
                  text_font: mdi_30
                  text: "\U000F0241"
              - label:
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  text_font: roboto_18
                  bg_opa: TRANSP
                  styles: font_style
                  id: power_lbl_forbruk_denne_maned


    - id: timedate_page
      # on_swipe_left:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped left"
      #   - lvgl.page.next:
      # on_swipe_right:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped right"
      #   - lvgl.page.previous:
      bg_color: black
      bg_opa: TRANSP
      widgets:
        - obj:
            align: CENTER
            width: 470
            height: 470
            pad_all: 2
            bg_color: black
            bg_opa: TRANSP
            border_opa: COVER
            border_color: white
            border_width: 0
            layout:
              pad_column: 0
              pad_row: 0
              type: GRID
              grid_rows: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
              grid_columns: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
            widgets:
              - obj:
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: header_footer
                  widgets:
                    - label:
                        text_font: roboto_20
                        text: "Kalender"
                        align: CENTER
                        text_align: CENTER
                        text_color: 0xFFFFFF
              - label:
                  text: "\uF1EB"
                  id: lbl_hastatus_tnd
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  hidden: true
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
              - label:
                  text: "Hellarvik"
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: END
                  styles: font_style
                  text_font: roboto_24
                  bg_opa: TRANSP              
              - label:
                  id: lbl_event_hellarvik_1
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: END
                  styles: font_style
                  text_font: roboto_20
                  bg_opa: TRANSP
              - label:
                  id: lbl_event_hellarvik_2
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: font_style
                  text_font: roboto_20
                  bg_opa: TRANSP
              - label:
                  id: lbl_event_hellarvik_3
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: START
                  styles: font_style
                  text_font: roboto_20
                  bg_opa: TRANSP
              - label:
                  text: "Middag"
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: END
                  styles: font_style
                  text_font: roboto_24
                  bg_opa: TRANSP              
              - label:
                  id: lbl_event_middag_1
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: END
                  styles: font_style
                  text_font: roboto_20
                  bg_opa: TRANSP
              - label:
                  id: lbl_event_middag_2
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: font_style
                  text_font: roboto_20
                  bg_opa: TRANSP
              - label:
                  id: lbl_event_middag_3
                  grid_cell_row_pos: 8
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 1
                  grid_cell_column_span: 8
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: START
                  styles: font_style
                  text_font: roboto_20
                  bg_opa: TRANSP
    - id: bus_page
      # on_swipe_left:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped left"
      #   - lvgl.page.next:
      # on_swipe_right:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped right"
      #   - lvgl.page.previous:
      bg_color: black
      bg_opa: TRANSP
      widgets:
        - obj:
            align: CENTER
            width: 470
            height: 470
            pad_all: 2
            bg_color: black
            bg_opa: TRANSP
            border_opa: COVER
            border_color: white
            border_width: 0
            layout:
              pad_column: 0
              pad_row: 0
              type: GRID
              grid_rows: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
              grid_columns: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
            widgets:
              - obj:
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: header_footer
                  widgets:
                    - label:
                        text_font: roboto_20
                        text: "Busser"
                        align: CENTER
                        text_align: CENTER
                        text_color: 0xFFFFFF
              - label:
                  text: "\uF1EB"
                  id: lbl_hastatus_bus
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  hidden: true
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
# 58 Nydalen
              - label:
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 5
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "58 Nydalen"
                  text_font: roboto_30
                  text_color: Light_Blue
              - label:
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Neste:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_58_nydalen_first
                  text_font: roboto_28
                  text_color: Light_Green
              - label:
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Etter det:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_58_nydalen_next
                  text_font: roboto_18
                  text_color: Light_Yellow
# 60 Vippetangen
              - label:
                  grid_cell_row_pos: 1
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 5
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "60 Vippetangen"
                  text_font: roboto_30
                  text_color: Light_Blue
              - label:
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Neste:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_60_vippetangen_first
                  text_font: roboto_28
                  text_color: Light_Green
              - label:
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Etter det:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 3
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_60_vippetangen_next
                  text_font: roboto_18
                  text_color: Light_Yellow
# 58 Tveita
              - label:
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 5
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "58 Tveita"
                  text_font: roboto_30
                  text_color: Light_Blue
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Neste:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_58_tveita_first
                  text_font: roboto_28
                  text_color: Light_Green
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 0
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Etter det:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_58_tveita_next
                  text_font: roboto_18
                  text_color: Light_Yellow
# 60 Tonsenhagen
              - label:
                  grid_cell_row_pos: 5
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 5
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "60 Tonsenhagen"
                  text_font: roboto_30
                  text_color: Light_Blue
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Neste:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_60_tonsenhagen_first
                  text_font: roboto_28
                  text_color: Light_Green
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 5
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: END
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text: "Etter det:  "
                  text_font: roboto_18
                  text_color: 0xFFFFFF
              - label:
                  grid_cell_row_pos: 7
                  grid_cell_column_pos: 7
                  grid_cell_row_span: 1
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  id: lbl_60_tonsenhagen_next
                  text_font: roboto_18
                  text_color: Light_Yellow
    - id: info_page
      # on_swipe_left:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped left"
      #   - lvgl.page.next:
      # on_swipe_right:
      #   - lambda: 'lv_indev_wait_release(lv_indev_get_act());'
      #   - logger.log: "swiped right"
      #   - lvgl.page.previous:
      bg_color: black
      bg_opa: TRANSP
      widgets:
        - obj:
            align: CENTER
            width: 470
            height: 470
            pad_all: 2
            bg_color: black
            bg_opa: TRANSP
            border_opa: COVER
            border_color: white
            border_width: 0
            layout:
              pad_column: 0
              pad_row: 0
              type: GRID
              grid_rows: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
              grid_columns: [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
            widgets:
              - obj:
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 3
                  grid_cell_row_span: 1
                  grid_cell_column_span: 4
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  styles: header_footer
                  widgets:
                    - label:
                        text_font: roboto_20
                        text: "Infoside"
                        align: CENTER
                        text_align: CENTER
                        text_color: 0xFFFFFF
              - label:
                  text: "\uF1EB"
                  id: lbl_hastatus_inf
                  grid_cell_row_pos: 0
                  grid_cell_column_pos: 8
                  grid_cell_row_span: 1
                  grid_cell_column_span: 1
                  grid_cell_x_align: CENTER
                  grid_cell_y_align: CENTER
                  hidden: true
                  bg_opa: TRANSP
                  text_align: right
                  text_color: 0xFFFFFF
# Papirsøppel
              - label:
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text_font: mdi_42
                  text_color: Steel_Blue
                  text: "\U000F1001"
              - label:
                  grid_cell_row_pos: 2
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text_font: roboto_30
                  text_color: Ghost_White
                  id: lbl_info_paper_waste
# Restsøppel
              - label:
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text_font: mdi_42
                  text_color: Rosy_Brown
                  text: "\U000F0A79"
              - label:
                  grid_cell_row_pos: 4
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text_font: roboto_30
                  text_color: Ghost_White
                  id: lbl_info_rest_waste
# Posten
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 1
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text_font: mdi_42
                  text_color: Orange_Red
                  text: "\U000F06EE"
              - label:
                  grid_cell_row_pos: 6
                  grid_cell_column_pos: 2
                  grid_cell_row_span: 2
                  grid_cell_column_span: 2
                  grid_cell_x_align: START
                  grid_cell_y_align: CENTER
                  bg_opa: TRANSP
                  text_font: roboto_30
                  text_color: Ghost_White
                  id: lbl_info_mail

touchscreen:
  on_touch:
    - if:
        condition: lvgl.is_paused
        then:
          - logger.log: "LVGL resuming"
          - lvgl.resume:
          - lvgl.page.show: main_page
          - lvgl.widget.redraw
          - light.turn_on: backlight
